<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindMatrix - Poker Game Quiz</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/script.js" defer></script>
    
    <style>
	    /* Poker Card Styles */
	    .card {
	        width: 300px;
	        height: 400px;
	        border-radius: 10px;
	        background-color: white;
	        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3);
	        display: flex;
	        flex-direction: column;
	        justify-content: center;
	        align-items: center;
	        margin: 10px auto;
	        padding: 20px;
	        text-align: center;
	        position: absolute;  /* Allow cards to overlap */
	        transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out;
	    }
	
	    .card-question {
	        font-size: 20px;
	        font-weight: bold;
	        margin-bottom: 20px;
	    }
	
	    .card-options {
	        list-style-type: none;
	        padding: 0;
	    }
	
	    .card-options li {
	        margin: 10px 0;
	    }
	
	    .card button {
	        background-color: #007bff;
	        color: white;
	        border: none;
	        padding: 10px 20px;
	        border-radius: 5px;
	        cursor: pointer;
	    }
	
	    .card button:hover {
	        background-color: #0056b3;
	    }
	
	    /* Hide all cards initially */
	    .card {
	        opacity: 0;
	        transform: translateX(100%); /* Hide them to the right initially */
	    }
	
	    /* Show the active card */
	    .card.active {
	        opacity: 1;
	        transform: translateX(0);  /* Bring the active card into view */
	    }
	
	    /* Animating card out of view */
	    .card.move-out {
	        transform: translateX(100%); /* Move the card out to the right */
	        opacity: 0;
	    }
	    
	    .card.enter-left {
		    transform: translateX(-100%);
		    opacity: 1;
		}
	
	    /* Stack all cards in one place (overlapping) */
	    .game-container {
	        position: relative;
	        width: 300px;  /* Same width as the card */
	        height: 400px; /* Same height as the card */
	        margin-top: 50px;
	    }
	</style>

</head>
<body>
    <div class="game-container">
        <!-- Cards will be displayed here -->
        <div th:each="game, iterStat : ${games}" class="card" th:classappend="${iterStat.index == 0} ? 'active'">
            <div class="card-question" th:text="${game.question}">Question</div>
            <ul class="card-options">
                <li th:text="${game.answers[0]}">Option A</li>
                <li th:text="${game.answers[1]}">Option B</li>
                <li th:text="${game.answers[2]}">Option C</li>
                <li th:text="${game.answers[3]}">Option D</li>
            </ul>
            <button class="next-button">Next</button>
        </div>
    </div>

    <script>
	    document.addEventListener("DOMContentLoaded", function () {
	        const cards = document.querySelectorAll('.card');
	        let currentCardIndex = 0;
	
	        document.querySelectorAll('.next-button').forEach(button => {
	            button.addEventListener('click', () => {
	                const currentCard = cards[currentCardIndex];
	                
	                // Move current card out
	                currentCard.classList.add('move-out');
	                
	                // Wait for the animation to finish before moving the card to the end of the stack
	                currentCard.addEventListener('transitionend', () => {
	                    currentCard.classList.remove('move-out', 'active');
	
	                    // Move to the next card in the stack
	                    currentCardIndex = (currentCardIndex + 1) % cards.length;
	
	                    // Activate the next card
	                    const nextCard = cards[currentCardIndex];
	                    nextCard.classList.add('active');
	                }, { once: true }); // Ensures this event handler runs only once per transition
	            });
	        });
	
	        // Set the first card as active initially
	        cards[currentCardIndex].classList.add('active');
	    });
	</script>
</body>
</html>
